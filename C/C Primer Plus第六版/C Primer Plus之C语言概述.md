# C primer Plus之C语言概述

## 1. 第一个C语言程序

```c
/**
 * 创建第一个简单的C语言程序
 * Created by inconspicuousy on 2020/11/5.
 */

#include "stdio.h"

int main(void) {

    int num;

    num = 1;
    printf("我是一个简单的");
    printf("电脑。\n");
    printf("这是我编写的第%d个C语言程序。", num);
    return 0;
}
```

- 执行结果

```shell
我是一个简单的电脑。
这是我编写的第1个C语言程序。
```

## 2. 预处理指令和头文件

```c
#include "stdio.h"
```

一般来说，C语言程序的顶部都是由预处理指令和头文件组成。

- 预处理指令

\#include 这行代码是一条C预处理器指令（preprocessor directive），通常，C编译器在编译前会对源代码做一些准备工作，即预处理 （preprocessing）。

- 头文件

C程序顶部的信息集合被称为头文件（header）。 在大多数情况下，头文件包含了编译器创建最终可执行程序要用到的信息。简而言之，头文件帮助编译器把你的程序正确地组合在一起。

所有的C编译器软件包都提供stdio.h文件，该文件中包含了供编译器使用的输入和输出函数（如， printf()）信息，该文件名的含义是标准输入/输出（Standard Input Output）头文件。

> `#include "stdio.h"` 的作用相当于把stdio.h文件中的所有内容都输入该行所在的位置，可以理解为这是一种拷贝-粘贴的操作。
>
> 这种方式也就是C语言模块化的核心，通过#include预处理指令，可以实现多个模块之间共享许多程序共有的信息。

## 3. main函数

```c
int main(void) {
	...
}
```

main函数是C语言中特殊的函数，一般情况下， C语言程序都是从main()函数开始执行的。

### 3.1 函数的组成

```c
返回类型 函数名称(参数列表) {
	...函数体...
}
```

- 返回类型

```c
int
```

int是一个数据类型，表明main函数的返回类型为int数据类型，也就是说main函数返回的值是整数。

> 注意：
>
> 1、普通函数的返回值是用来给调用函数使用，main函数的返回值是返回给操作系统。

- 函数名称

```c
main
```

> 在C语言中，对于自定义名称（如：函数名、变量名等）都要符号如下的三个条件：
>
> 1、以小写字母、大写字母、数字和下划线（_）来命名，而且名称的第一个字符必须是字符或下划线，不能是数字。
>
> 2、操作系统和C库经常使用以一个或两个下划线字符开始的标识符，因此最好避免在自己的程序中使用这种名称。
>
> 3、不能用 `关键字` 和 `保留字`和 `标准库函数名` ，比如这里的int数据类型、printf函数名等其他的字样。
>
> 特别值得说的是C语言是对大小写敏感的，对于大小写不同的名称，是具有不同的意义。



- 参数列表

```c
(void)
```

参数列表一般在（）中括号内部声明。特殊的，void表示该函数不需要传递参数。

> 注意：
>
> 有些编译器允许当函数没有参数时，不需要写void，但是不建议。

- 函数体

```c
{
	.....
}
```

函数体内部就是函数待执行的语句。

一般来说，花括号用于标识函数体或者是块语句（函数中的多条语句合并为一个单元或块就叫块语句）。

### 3.2 函数原型

> 函数原型可以理解为函数的声明，表示定义一个不含有函数体的函数。

```c
int main(void);
```

C语言是一个自上向下的执行的语言，在一个函数体内部调用另一个函数的时候，被调用函数必须在调用函数之前声明或者定义。

```c
// 先要进行函数声明，才能被fun2调用
void fun3(void);

// 先进行函数定义， 才能被fun2调用
void fun4(void) {
    printf("fun4");
}

void fun2(void) {
    fun3();
    fun4();
}

void fun3(void) {
    printf("fun3");
}
```

## 4. 变量的声明

```c
int num;
```

在C语言中， 要使用变量，就必须先对变量进行声明，变量的声明在底层做了两件事情：

1. 在函数中有一个名为num的变量。
2. int表明num是一个整数，编译器会为num变量在内存中分配存储空间。

> 注意：
>
> 1、变量名也是属于自定义名称，和函数名一样，也要满足相应的条件。对于变量的名称，除了C语言要求的硬性条件外，我们还需要满足看到变量名就知道变量所具有函数的条件，不能随意命名；对于不具有见名知义的变量名，我们需要结合注释告知变量的含义。
>
> 2、C语言中，所有的变量必须先声明才能使用。
>
> 3、以前C语言中，要求把变量声明在块的顶部，其他语句不能在任何声明的前面。虽然现在没有这个限制，但是还是推荐这种写法。
>
> 4、C语言可以处理多种类型的数据，如整数、字符和浮点数。把变量声明为整数或者字符类型，计算机才能正确的存储、读取和解释数据。

### 4.1 多个同类型变量的声明

```c
void fun2(void) {
    // 可以在一行直接定义多个同类型的变量
    // 注意，不要写成 int a,int b; 编译不通过 (x)
    int a, b;
    
    a = 1;
    b = 1;
}
```

可以在一行指定了变量的数据类型之后，多个变量共享该数据类型。

## 5. 变量的赋值

```c
num = 1;
```

这是一句赋值表达式语句，代码的意思是把值赋给变量num。

在执行变量声明时，编译器在计算机内存中为变量预留了指定的数据类型的空间，然后在执行赋值表达式语句时，把值存储在之前预留的位置。

## 6. printf函数

```c
printf("我是一个简单的");
printf("电脑。\n");
printf("这是我编写的第%d个C语言程序。", num);
```

这是在main函数中调用prinft函数，这里能使用printf函数的原因就是printf函数在stdio.h中已经声明了。

```c
int __cdecl printf(const char * __restrict__ _Format,...);
```

这个是printf函数的声明，对函数声明做简单的分析就可以看出，printf函数接收一个或者多个参数。参数一为要格式化的字符，其他参数为格式化字符中所需要的辅助参数，就比如第三个printf函数的调用就表示将num变量的值替换格式化字符中%d。

### 6.1 函数的实参和形参

- 实参（actual argument）表示的是当函数被调用时，调用函数传递给被调用函数的参数列表。
- 形参表示函数中用于存储实参的变量，也就是说函数声明的中的参数列表。

### 6.2 转义序列

转义字符用于代表难以表示或无法输入的字符。每个转义字符都以反斜杠字符"\\"开始。常用的转义字符：

| 转义字符 | 含义                                              |
| -------- | ------------------------------------------------- |
| \n       | newline，表示换行，从下一行的最左边开始新的一行。 |
| \t       | tab，代表Tab键。                                  |
| \b       | backspace，代表退格键。                           |

所以在 `printf("电脑。\n");`中表示换行，将光标切换到下一个行的最左边。

### 6.3 格式化打印函数中%的作用

在格式化打印函数printf的格式化字符参数中，%的作用就是提醒程序要在该处打印一个变量，`%d`相当于一个占位符，表明将变量作为十进制整数打印。而printf的参数列表中，从第2个参数开始专门用于对占位符进行依次以执行的数据类型填充。

常用的占位符：

| 占位符 | 含义                                       |
| ------ | ------------------------------------------ |
| %d     | 读入十进制整数                             |
| %f     | 用小数形式或指数形式输入                   |
| %x     | 读入十六进制整数                           |
| %s     | 读入一个字符串，遇空格、制表符或换行符结束 |

## 7. return语句

```c
return 0;
```

return语句是函数的结束语句，一般后面跟上的就是当前函数的返回值。

> 注意：
>
> 1、main函数可以省略return，编译器会自动为其添加 `return 0;`，但是不建议这么做，所有指明需要返回值的函数都需要加上return语句。

## 8. 注释

在C语言中支持三种格式的注释。

```
# 1、 //
# 2、 /* ... */
# 3、 /** ... */
```

方式一适合单行注释，方式二和三适合多行注释，在使用过程中要注意方式2、3的结束标签。